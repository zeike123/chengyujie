<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>chengyujie.top</title>

<style>
  :root{
    --bg:#0f172a;
    --panel: rgba(18,28,47,.72);
    --card: rgba(15,26,45,.75);
    --border: rgba(255,255,255,.10);
    --border2: rgba(255,255,255,.14);
    --text:#eaf0ff;
    --muted:#9db0d1;
    --accent:#7aa7ff;
    --radius:18px;
    --shadow: 0 10px 28px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Arial, "Microsoft YaHei", system-ui;
    color:var(--text);
    background: var(--bg);
    min-height:100vh;
    background-size:cover;
    background-position:center;
  }

  /* èƒŒæ™¯ï¼ˆå¯è¢«å£çº¸è¦†ç›–ï¼‰ */
  .bg{
    position:fixed;
    inset:0;
    z-index:-2;
    background:
      radial-gradient(800px 520px at 15% 10%, rgba(122,167,255,.16), transparent 60%),
      radial-gradient(720px 520px at 85% 20%, rgba(110,231,255,.10), transparent 55%),
      radial-gradient(900px 650px at 60% 92%, rgba(167,139,250,.10), transparent 60%),
      linear-gradient(160deg, #050a14, #0b1636);
  }
  .stars{
    position:fixed;
    inset:0;
    z-index:-1;
    background-image:
      radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.55) 40%, transparent 41%),
      radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.45) 40%, transparent 41%),
      radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.40) 40%, transparent 41%),
      radial-gradient(1px 1px at 85% 60%, rgba(255,255,255,.35) 40%, transparent 41%),
      radial-gradient(1px 1px at 25% 55%, rgba(255,255,255,.35) 40%, transparent 41%),
      radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.30) 40%, transparent 41%);
    background-size: 260px 260px;
    opacity:.55;
    filter: blur(.2px);
  }

  .wrap{
    max-width: 1200px;
    margin: 0 auto;
    padding: 18px 18px 90px;
  }

  header{
    margin-top: 6px;
    display:flex;
    flex-direction:column;
    gap:12px;
    align-items:center;
  }
  .title{
    font-size: 28px;
    font-weight: 800;
    letter-spacing:.4px;
  }

  /* æœç´¢æ  */
  .searchBar{
    width: min(920px, 100%);
    display:flex;
    gap:10px;
    align-items:center;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 10px;
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
  }
  .seg{
    display:flex;
    background: rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    border-radius: 14px;
    overflow:hidden;
    flex: 0 0 auto;
  }
  .seg button{
    border:0;
    padding:9px 12px;
    cursor:pointer;
    background:transparent;
    color:var(--muted);
    font-weight:800;
    font-size:12px;
  }
  .seg button.active{
    background: rgba(122,167,255,.20);
    color: var(--text);
  }
  .searchInput{
    flex:1;
    border:0;
    outline:none;
    background: transparent;
    color: var(--text);
    font-size: 15px;
    padding: 8px 6px;
  }
  .searchBtn{
    border:1px solid rgba(122,167,255,.40);
    background: rgba(122,167,255,.20);
    color: var(--text);
    padding: 10px 14px;
    border-radius: 14px;
    cursor:pointer;
    font-weight:900;
    flex: 0 0 auto;
  }
  .searchBtn:hover{ border-color: rgba(122,167,255,.70); }

  /* åˆ†ç±»å— */
  .section{
    margin-top: 18px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
    padding: 14px;
  }
  .secHead{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding: 4px 6px 10px;
    border-bottom: 1px solid rgba(255,255,255,.08);
  }
  .secTitle{
    display:flex;
    align-items:center;
    gap:10px;
    min-width: 0;
  }
  .badge{
    width:10px;height:10px;border-radius:3px;
    background: rgba(122,167,255,.55);
    box-shadow: 0 0 0 3px rgba(122,167,255,.12);
    flex: 0 0 auto;
  }
  .catName{
    font-weight:900;
    font-size: 14px;
    border:0;
    outline:none;
    background: transparent;
    color: var(--text);
    padding: 6px 8px;
    border-radius: 10px;
    min-width: 120px;
  }
  .catName:focus{
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(122,167,255,.30);
  }
  .secTools{
    display:flex;
    gap:8px;
    flex: 0 0 auto;
  }
  .miniBtn{
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: var(--text);
    padding: 8px 10px;
    border-radius: 12px;
    cursor:pointer;
    font-weight:800;
    font-size:12px;
  }
  .miniBtn:hover{ border-color: rgba(122,167,255,.45); }

  .grid{
    margin-top: 14px;
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap:12px;
  }

  /* ç½‘ç«™å¡ç‰‡ */
  .card{
    background: var(--card);
    border:1px solid rgba(255,255,255,.10);
    border-radius: 16px;
    padding: 12px;
    transition: .18s;
    cursor:pointer;
    user-select:none;
    display:flex;
    gap:10px;
    align-items:center;
  }
  .card:hover{
    transform: translateY(-2px);
    border-color: rgba(122,167,255,.45);
    box-shadow: 0 10px 22px rgba(0,0,0,.25);
  }

  /* âœ… å›¾æ ‡ï¼šæ­£æ–¹å½¢ */
  .icon{
    width:42px;height:42px;
    border-radius: 10px; /* åœ†è§’æ­£æ–¹å½¢ */
    background: rgba(122,167,255,.12);
    border: 1px solid rgba(122,167,255,.18);
    display:grid;
    place-items:center;
    overflow:hidden;
    flex: 0 0 auto;
  }
  .icon img{
    width: 26px; height: 26px;
    image-rendering: auto;
  }

  .meta{
    min-width:0;
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .name{
    font-weight:900;
    font-size: 14px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .url{
    color: var(--muted);
    font-size: 12px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  /* åº•éƒ¨æµ®åŠ¨æŒ‰é’® */
  .fab{
    position: fixed;
    right: 20px;
    bottom: 20px;
    display:flex;
    gap:10px;
    z-index: 20;
  }
  .fab .btn{
    border:1px solid rgba(255,255,255,.12);
    background: rgba(18,28,47,.78);
    backdrop-filter: blur(10px);
    color: var(--text);
    padding: 12px 14px;
    border-radius: 16px;
    cursor:pointer;
    font-weight:900;
    box-shadow: var(--shadow);
  }
  .fab .btn:hover{
    border-color: rgba(122,167,255,.45);
  }

  /* æ¨¡æ€æ¡† */
  .modal{
    position:fixed;
    inset:0;
    background: rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    z-index: 50;
    padding: 18px;
  }
  .modalCard{
    width: min(520px, 100%);
    background: rgba(18,28,47,.92);
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 18px;
    box-shadow: var(--shadow);
    padding: 16px;
    backdrop-filter: blur(12px);
  }
  .modalTitle{
    font-weight: 900;
    margin: 4px 0 12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .x{
    cursor:pointer;
    color: var(--muted);
    font-weight: 900;
    padding: 6px 10px;
    border-radius: 10px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.06);
  }
  .x:hover{ border-color: rgba(122,167,255,.45); }

  .row{
    display:flex;
    gap:10px;
    margin: 10px 0;
  }
  .row > *{ flex:1; }
  input, select{
    width:100%;
    padding: 12px 12px;
    border-radius: 14px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: var(--text);
    outline: none;
    font-size: 14px;
  }
  input::placeholder{ color: rgba(157,176,209,.75); }
  .actions{
    display:flex;
    gap:10px;
    margin-top: 14px;
  }
  .actions button{
    flex:1;
    padding: 12px 12px;
    border-radius: 14px;
    cursor:pointer;
    font-weight: 900;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: var(--text);
  }
  .actions button.primary{
    border-color: rgba(122,167,255,.45);
    background: rgba(122,167,255,.20);
  }
  .actions button:hover{ border-color: rgba(122,167,255,.55); }

  @media (max-width: 520px){
    .row{ flex-direction:column; }
  }
</style>
</head>

<body>
  <div class="bg"></div>
  <div class="stars"></div>

  <div class="wrap">
    <header>
      <div class="title">chengyujie.top ğŸš€</div>

      <!-- æœç´¢æ  -->
      <div class="searchBar">
        <div class="seg" role="tablist" aria-label="Search Engine">
          <button id="tabBaidu" class="active" type="button">ç™¾åº¦</button>
          <button id="tabGoogle" type="button">è°·æ­Œ</button>
        </div>
        <input id="q" class="searchInput" placeholder="è¾“å…¥å…³é”®è¯ï¼Œå›è½¦æœç´¢â€¦" />
        <button id="doSearch" class="searchBtn" type="button">æœç´¢</button>
      </div>
    </header>

    <div id="sections"></div>
  </div>

  <!-- æµ®åŠ¨æŒ‰é’®ï¼šæ·»åŠ ç½‘ç«™ / èƒŒæ™¯ -->
  <div class="fab">
    <button class="btn" id="bgBtn" type="button">ğŸ–¼ æ›´æ¢å£çº¸</button>
    <button class="btn" id="addBtn" type="button">â• æ·»åŠ ç½‘å€</button>
  </div>

  <!-- æ·»åŠ ç½‘å€ Modal -->
  <div class="modal" id="modal">
    <div class="modalCard">
      <div class="modalTitle">
        <span>â• æ·»åŠ ç½‘å€</span>
        <span class="x" id="closeModal">å…³é—­</span>
      </div>

      <div class="row">
        <input id="siteName" placeholder="åç§°ï¼ˆå¯ç©ºï¼‰" />
        <select id="siteCat"></select>
      </div>

      <div class="row">
        <input id="siteUrl" placeholder="ç½‘å€ï¼ˆä¾‹å¦‚ https://xueqiu.comï¼‰" />
      </div>

      <div class="actions">
        <button id="cancelAdd" type="button">å–æ¶ˆ</button>
        <button class="primary" id="saveAdd" type="button">ä¿å­˜</button>
      </div>

      <div style="margin-top:10px;color:var(--muted);font-size:12px;line-height:1.5;">
        å°æŠ€å·§ï¼šå³é”®/é•¿æŒ‰å¡ç‰‡å¯åˆ é™¤ï¼›åŒå‡»å¡ç‰‡å¯æ”¹åï¼›æ‹–åŠ¨åˆ†ç±»çš„ â†‘â†“ å¯è°ƒé¡ºåºã€‚
      </div>
    </div>
  </div>

<script>
  // ---------- å­˜å‚¨é”® ----------
  const KEY = "nav_v1";
  const BGKEY = "nav_bg";

  // ---------- é»˜è®¤ 8 åˆ†ç±»ï¼ˆä½ å¯ç›´æ¥æ”¹åï¼‰ ----------
  const DEFAULT_CATS = [
    { id: "c1", name: "è§†é¢‘ç±»" },
    { id: "c2", name: "æœç´¢ç±»" },
    { id: "c3", name: "æ–°é—»ç±»" },
    { id: "c4", name: "å·¥å…·ç±»" },
    { id: "c5", name: "å­¦ä¹ ç±»" },
    { id: "c6", name: "è´­ç‰©ç±»" },
    { id: "c7", name: "ç¤¾äº¤ç±»" },
    { id: "c8", name: "é‡‘èç±»" },
  ];

  // ---------- é»˜è®¤ç«™ç‚¹ ----------
  const DEFAULT_SITES = [
    { id: rid(), catId: "c2", name: "ç™¾åº¦", url: "https://www.baidu.com" },
    { id: rid(), catId: "c2", name: "è°·æ­Œ", url: "https://www.google.com" },
    { id: rid(), catId: "c1", name: "Bç«™", url: "https://www.bilibili.com" },
    { id: rid(), catId: "c8", name: "é›ªçƒ", url: "https://xueqiu.com" },
  ];

  let state = loadState();
  let engine = "baidu"; // baidu | google

  // ---------- èƒŒæ™¯ ----------
  const bg = localStorage.getItem(BGKEY);
  if(bg){
    document.body.style.backgroundImage = `url(${bg})`;
  }

  // ---------- æœç´¢ ----------
  const tabBaidu = document.getElementById("tabBaidu");
  const tabGoogle = document.getElementById("tabGoogle");
  const q = document.getElementById("q");
  const doSearch = document.getElementById("doSearch");

  function setEngine(e){
    engine = e;
    tabBaidu.classList.toggle("active", e==="baidu");
    tabGoogle.classList.toggle("active", e==="google");
    q.focus();
  }
  tabBaidu.onclick = ()=>setEngine("baidu");
  tabGoogle.onclick = ()=>setEngine("google");

  function searchNow(){
    const kw = (q.value || "").trim();
    if(!kw) return;
    const url = engine==="baidu"
      ? `https://www.baidu.com/s?wd=${encodeURIComponent(kw)}`
      : `https://www.google.com/search?q=${encodeURIComponent(kw)}`;
    window.open(url, "_blank", "noopener");
  }
  doSearch.onclick = searchNow;
  q.addEventListener("keydown", (e)=>{ if(e.key==="Enter") searchNow(); });

  // ---------- æ¸²æŸ“ ----------
  const sectionsEl = document.getElementById("sections");
  const siteCatSel = document.getElementById("siteCat");

  function render(){
    // åˆ†ç±»ä¸‹æ‹‰
    siteCatSel.innerHTML = "";
    state.cats.forEach(c=>{
      const opt = document.createElement("option");
      opt.value = c.id;
      opt.textContent = c.name;
      siteCatSel.appendChild(opt);
    });

    // åˆ†ç±»å—
    sectionsEl.innerHTML = "";
    state.cats.forEach((cat, idx)=>{
      const sec = document.createElement("div");
      sec.className = "section";

      // å¤´éƒ¨ï¼šå¯ç¼–è¾‘åˆ†ç±»å + æ’åºæŒ‰é’®
      const head = document.createElement("div");
      head.className = "secHead";

      const left = document.createElement("div");
      left.className = "secTitle";

      const badge = document.createElement("div");
      badge.className = "badge";

      const nameInput = document.createElement("input");
      nameInput.className = "catName";
      nameInput.value = cat.name;
      nameInput.title = "ç‚¹å‡»ç¼–è¾‘åˆ†ç±»å";
      nameInput.addEventListener("change", ()=>{
        cat.name = nameInput.value.trim() || cat.name;
        save();
      });

      left.appendChild(badge);
      left.appendChild(nameInput);

      const tools = document.createElement("div");
      tools.className = "secTools";

      const up = document.createElement("button");
      up.className = "miniBtn";
      up.textContent = "â†‘";
      up.title = "ä¸Šç§»åˆ†ç±»";
      up.disabled = idx===0;
      up.onclick = ()=>{
        if(idx===0) return;
        const tmp = state.cats[idx-1];
        state.cats[idx-1] = state.cats[idx];
        state.cats[idx] = tmp;
        save();
      };

      const down = document.createElement("button");
      down.className = "miniBtn";
      down.textContent = "â†“";
      down.title = "ä¸‹ç§»åˆ†ç±»";
      down.disabled = idx===state.cats.length-1;
      down.onclick = ()=>{
        if(idx===state.cats.length-1) return;
        const tmp = state.cats[idx+1];
        state.cats[idx+1] = state.cats[idx];
        state.cats[idx] = tmp;
        save();
      };

      const addHere = document.createElement("button");
      addHere.className = "miniBtn";
      addHere.textContent = "â•";
      addHere.title = "åœ¨æ­¤åˆ†ç±»æ·»åŠ ç½‘å€";
      addHere.onclick = ()=>{
        openModal(cat.id);
      };

      tools.appendChild(addHere);
      tools.appendChild(up);
      tools.appendChild(down);

      head.appendChild(left);
      head.appendChild(tools);

      // ç½‘æ ¼ï¼šè¯¥åˆ†ç±»ç«™ç‚¹
      const grid = document.createElement("div");
      grid.className = "grid";

      const sites = state.sites.filter(s=>s.catId===cat.id);

      // å¦‚æœåˆ†ç±»é‡Œæ²¡æœ‰ç«™ç‚¹ï¼Œæ”¾ä¸€ä¸ªæç¤ºå¡
      if(sites.length===0){
        const empty = document.createElement("div");
        empty.className = "card";
        empty.style.opacity = ".7";
        empty.style.cursor = "default";
        empty.innerHTML = `
          <div class="icon">ï¼‹</div>
          <div class="meta">
            <div class="name">ç©ºåˆ†ç±»</div>
            <div class="url">ç‚¹å³ä¸Š â• æ·»åŠ </div>
          </div>
        `;
        grid.appendChild(empty);
      } else {
        sites.forEach(site=>{
          const card = document.createElement("div");
          card.className = "card";

          card.onclick = ()=> window.open(site.url, "_blank", "noopener");

          // å³é”®åˆ é™¤
          card.oncontextmenu = (e)=>{
            e.preventDefault();
            if(confirm(`åˆ é™¤ã€Œ${site.name}ã€ï¼Ÿ`)){
              state.sites = state.sites.filter(x=>x.id!==site.id);
              save();
            }
          };

          // åŒå‡»æ”¹å/æ”¹ç½‘å€/æ”¹åˆ†ç±»ï¼ˆç”¨ prompt ç®€åŒ–ï¼Œåç»­å¯åšæ›´æ¼‚äº®çš„ç¼–è¾‘å¼¹çª—ï¼‰
          card.ondblclick = ()=>{
            const newName = prompt("ä¿®æ”¹åç§°ï¼ˆç•™ç©ºä¸æ”¹ï¼‰", site.name);
            if(newName !== null && newName.trim() !== "") site.name = newName.trim();

            const newUrl = prompt("ä¿®æ”¹ç½‘å€ï¼ˆç•™ç©ºä¸æ”¹ï¼‰", site.url);
            if(newUrl !== null && newUrl.trim() !== "") site.url = normalizeUrl(newUrl.trim());

            const newCat = prompt("ä¿®æ”¹åˆ†ç±»IDï¼ˆé«˜çº§ç”¨æ³•ï¼Œç•™ç©ºä¸æ”¹ï¼‰\næç¤ºï¼šc1~c8", site.catId);
            if(newCat !== null && newCat.trim() !== "") site.catId = newCat.trim();

            save();
          };

          const icon = document.createElement("div");
          icon.className = "icon";
          icon.innerHTML = `<img alt="" src="${favicon(site.url)}" onerror="this.remove();">`;

          const meta = document.createElement("div");
          meta.className = "meta";
          meta.innerHTML = `
            <div class="name">${escapeHtml(site.name)}</div>
            <div class="url">${escapeHtml(shortUrl(site.url))}</div>
          `;

          card.appendChild(icon);
          card.appendChild(meta);
          grid.appendChild(card);
        });
      }

      sec.appendChild(head);
      sec.appendChild(grid);
      sectionsEl.appendChild(sec);
    });
  }

  // ---------- æ·»åŠ ç½‘å€ Modal ----------
  const modal = document.getElementById("modal");
  const addBtn = document.getElementById("addBtn");
  const closeModal = document.getElementById("closeModal");
  const cancelAdd = document.getElementById("cancelAdd");
  const saveAdd = document.getElementById("saveAdd");
  const siteName = document.getElementById("siteName");
  const siteUrl = document.getElementById("siteUrl");

  function openModal(catId){
    modal.style.display = "flex";
    siteName.value = "";
    siteUrl.value = "";
    if(catId) siteCatSel.value = catId;
    setTimeout(()=>siteName.focus(), 50);
  }
  function hideModal(){ modal.style.display = "none"; }

  addBtn.onclick = ()=>openModal(state.cats[0]?.id || "c1");
  closeModal.onclick = hideModal;
  cancelAdd.onclick = hideModal;
  modal.addEventListener("click", (e)=>{ if(e.target===modal) hideModal(); });

  saveAdd.onclick = ()=>{
    const name = (siteName.value||"").trim();
    const urlRaw = (siteUrl.value||"").trim();
    const catId = siteCatSel.value;

    if(!urlRaw){
      alert("ç½‘å€ä¸èƒ½ä¸ºç©º");
      return;
    }
    const url = normalizeUrl(urlRaw);
    const finalName = name || guessNameFromUrl(url);

    state.sites.push({ id: rid(), catId, name: finalName, url });
    save();
    hideModal();
  };

  // ---------- æ›´æ¢å£çº¸ ----------
  document.getElementById("bgBtn").onclick = ()=>{
    const u = prompt("è¾“å…¥å£çº¸å›¾ç‰‡URLï¼ˆä¾‹å¦‚ https://xxx/xxx.jpgï¼‰\nç•™ç©º=æ¸…é™¤å£çº¸è¿”å›é»˜è®¤èƒŒæ™¯");
    if(u === null) return;

    const url = u.trim();
    if(!url){
      localStorage.removeItem(BGKEY);
      document.body.style.backgroundImage = "";
      alert("å·²æ¸…é™¤å£çº¸ âœ…");
      return;
    }
    localStorage.setItem(BGKEY, url);
    document.body.style.backgroundImage = `url(${url})`;
  };

  // ---------- å­˜å‚¨ ----------
  function save(){
    localStorage.setItem(KEY, JSON.stringify(state));
    render();
  }

  function loadState(){
    const raw = localStorage.getItem(KEY);
    if(!raw){
      return { cats: DEFAULT_CATS, sites: DEFAULT_SITES };
    }
    try{
      const parsed = JSON.parse(raw);
      // å…¼å®¹ï¼šç¼ºé¡¹è¡¥é½
      if(!Array.isArray(parsed.cats) || parsed.cats.length===0) parsed.cats = DEFAULT_CATS;
      if(!Array.isArray(parsed.sites)) parsed.sites = [];
      // ç¡®ä¿æœ‰ 8 ä¸ªåˆ†ç±»ï¼ˆå¦‚æœç”¨æˆ·è¯¯åˆ /æ—§ç‰ˆæœ¬ï¼‰
      if(parsed.cats.length < 8){
        const existing = new Set(parsed.cats.map(c=>c.id));
        DEFAULT_CATS.forEach(c=>{ if(!existing.has(c.id)) parsed.cats.push(c); });
      }
      return parsed;
    }catch{
      return { cats: DEFAULT_CATS, sites: DEFAULT_SITES };
    }
  }

  // ---------- å·¥å…· ----------
  function rid(){ return Math.random().toString(16).slice(2) + Date.now().toString(16); }

  function normalizeUrl(u){
    if(!/^https?:\/\//i.test(u)) return "https://" + u;
    return u;
  }

  function favicon(url){
    // é€šè¿‡ Google S2 æ‹‰ faviconï¼ˆç®€å•å¥½ç”¨ï¼‰
    // è‹¥ä½ æ›´æƒ³ç”¨ç«™ç‚¹è‡ªèº« faviconï¼Œä¹Ÿå¯æ”¹æˆ new URL(url).origin + "/favicon.ico"
    try{
      const host = new URL(url).hostname;
      return "https://www.google.com/s2/favicons?domain=" + encodeURIComponent(host) + "&sz=64";
    }catch{
      return "";
    }
  }

  function shortUrl(url){
    try{
      const u = new URL(url);
      return u.hostname.replace(/^www\./,"");
    }catch{
      return url;
    }
  }

  function guessNameFromUrl(url){
    try{
      const u = new URL(url);
      return u.hostname.replace(/^www\./,"");
    }catch{
      return "æ–°ç½‘ç«™";
    }
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
    }[m]));
  }

  // é¦–æ¬¡æ¸²æŸ“
  render();
</script>
</body>
</html>
